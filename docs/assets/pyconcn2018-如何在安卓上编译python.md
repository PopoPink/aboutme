标题

## 1 主题介绍

感谢大家如此热情，放弃周末宝贵的休息的时间过来参加咱们的pycon, 谢谢组织者们和志愿者的辛苦筹划和
准备，半夜还在布置会场。

很高兴今年又来这里，和诸位同仁互相交流和分享下，我们在python这块做了什么好玩的事情。

（格子衫的梗）- ？

今天我要分享的是如何把Python移植到安卓的过程，这些经验来源于，
然后副标题 编程的母鸡是怎么来的，希望能让不懂编程的朋友 猜出这个主题要介绍的内容，

关于Python如何编译是一个老话题，今天为什么要拿出来再聊聊？
因为经验告诉咱，做一件事，对基础和方向都了解，是能透彻理解这件事的关键，
因此，我就想基于我开发的一个QPython应用做的笔记，加工为今天的主题，希望能对大家用python编程有些帮助。

另外，在我讲完之后，如果有对折腾这个事情感兴趣的朋友，也欢迎加入跟我一块交流以及一块折腾，因为其实我们是有一个
比较大的想法。

## 2 关于我

（幻灯片跳出 ... 开发工程师之后开始说）
我是严河存，目前主要精力在Python编程教育领域。

二维码是我的个人网站，里面有我的从业简介和联系方式，
我的技术兴趣是创业，AI, 区块链，编程学习

欢迎大家联系交流合作。

## 3 目录

这是今天要介绍的内容
- 在安卓上运行Python的意义 （没有意义滴话折腾它干嘛）
- Python编译过程 （这个就是咱们的主要内容了）
- Python安卓交叉编译工具链定制（工具链已经在qpython github里释放出来了，结合今天的演讲既要，可以很方便地折腾起来）
- 如何在安卓上扩展Python （因为主题的关系，这节内容浅尝辄止，但实际上它比较有用，有需求的朋友可以再交流）
- Python社区的观察 （编程这个行业将会怎么发展，我们未来还能用那些姿势编程，希望大家可以互相交流分享下）

## 4 第一节封面

在安卓上运行Python的意义，意义是什么？

就是让安卓更加的Pythonic,作为一个linux,现在想折腾下安卓，太费劲了，光IDE就有可能下载一天，还得不断配置，如果上面有个Python,那情况就不一样了。

那么安卓上的Python能怎么？

## 5 在安卓上运行Python的意义

- 方便自动化 （写小脚本，让你的手机随心运行，再结合一些自动化工具，就能实现自动工作流）
- 方便开发 （QPython内置了一个IDE，也支持ssh, 其实还是不太方便，但是应急时还是能顶一顶的）
- 方便学习 （大家的空余时间基本都跟手机粘一块了，上面有电子书，但是编程不能总看书，得折腾）
- 自由定制 （这块的定制需要再编译时候定制了，比如中文化等等）

## 6 Python编译过程

进入咱们的重点内容，所讲的过程在linux ubuntu环境上折腾，在macos下也能跑通

## 7 Python编译过程

编译过程流程图
（参考ppt读，随意发挥)

## 8 交叉编译工具链 & 打补丁

第一步是 构建交叉编译工具链

然后是打补丁，对源码，（我们用补丁的方式来实现定制过程，有一些费劲，需要从配置阶段折腾，而不是直接改源代
码，但是这样可以保持和Python源同步更新）

有一些 tips ： 出来后适时发挥

## 9 生成Makefile

Automake是编译工程的关键，

因此在编译之前的步骤是

(点幻灯)
autoreconf
configure 最后生成Makefile

然后开始运行make了，到下一步

## 10 语法解析

make 先把Parse目录下的程序生成pgen程序，
然后再启动pgen，输入Grammar表（这个是易于人阅读的Python的语法配置表），输出程序阅读的语法c文件

## 11 编译 & 链接 基础Python

如何称为基础Python？

Python 目录 （Python语法处理，库加载等问题，以及启动／执行过程）/ Objects 目录（各种对象，如文件对象。包括资源／内存管理等） / Modules 目录（会调用Objects对象）

前两个目录里面的编译就能得到基础Python, python二进制应用程序，python lib共享库

分两步
- 编译 (主要将源文件转为为.o)
- 链接 (链接器主要是将有关的.o彼此相连接生成可加载、可执行的目标文件.so或者可执行程序；链接器的核心工作就是符号表解析和重定位)

## 12 编译Python扩展

编译 Modules 目录

主要是disutils, 这个也是pip的依赖库，用实现了强于autoconf/aotumake那样作用的python包编译工具

## 13 安装Python

（自由发挥）

full python在启动时会自动载入一些module,  
其他的探索：Programs 目录，有一个小sample, 一开始需要最小的python，就参考它，嵌入式里面集成python可以参考它

## 14 工具链定制

主要将在linux怎么定制这个交叉编译工具链，使用安卓的ndk

## 15 编译工具链的选择 & 构建

- 安卓ndk有什么内容
- 回顾下编译的过程
- 最后选择编译工具链和进行定制，交叉编译里面，一些编译参数尤为重要，没有用好，造成能编译出来，但是运行出错

## 16 在安卓上扩展Python

主要讲下在安卓上怎么扩展，其实也是以前的如何扩展python扩展


## 17 在安卓上扩展Python

python模块的结构是固定的

- 需要用PyModuleDef数据结构来声明模块
- 根据其约定的属性来定义这个模块的属性／方法
- 有一个模块初始化函数需要实现

然后就是放在交叉工具链里编译，不过有一些依赖于cython之类的程序生成中间c文件，依赖于host主机生成

## 18 编程进化的思考

到以上，技术部分的内容就大概讲完了，接下来就分享下我对于编程进化的思考

怎么进化，依赖的原则是“工具为人服务”

## 19 编程进化路线展望

- 早期怎样
- 现在这阶段是怎样的，这阶段已经过去好久了
- 下一阶段会怎样？（停顿）

大家是否想过这个问题

我认为是AI编程时代，汽车都能自动驾驶，为什么编程不能做到自动编程？
实时上有些基础部件已经已经出来了，AI音响，IFTTT...


人与编程机器人怎么编程，交流式编程？

我们QPython希望在这个过程中做贡献

## 20 能不能做到？
我认为是可行的
看看社区里的问题
...

## 那么应该怎么做？

细节我也不知道，不过准备上路，你有兴趣来一起折腾么？欢迎联系
